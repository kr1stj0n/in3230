<!DOCTYPE html>
<html lang="no">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1" />
  

   <meta charset="utf-8" >
   

   <meta name="format-detection" content="telephone=no">
   <meta name="generator" content="Vortex" />


     <title>Running your VM on NREC - IN3230 - Høst 2020 - Universitetet i Oslo</title>
     <meta property="og:title" content="Running your VM on NREC - IN3230 - Høst 2020 - Universitetet i Oslo" />


   
  
  
  
  

  
    

    
    
    

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@unioslo" />
    <meta name="twitter:title" content="Running your VM on NREC" />

    
      <meta name="twitter:description" content="Les denne saken på UiOs nettsider." />
    

    

    
    
      <meta name="twitter:url" content="https://www.uio.no/studier/emner/matnat/ifi/IN3230/h20/oblig/running-your-vm-on-nrec.html" />
    
  

   
  
  
  
  

  
    
    

    <meta property="og:url" content="https://www.uio.no/studier/emner/matnat/ifi/IN3230/h20/oblig/running-your-vm-on-nrec.html" />
    <meta property="og:type" content="website" />
    

    
  


    
  
  
  
  
  
  
  

  
    
      <link rel="shortcut icon" href="/vrtx/decorating/resources/dist/images/favicon.ico" >
      <link rel="apple-touch-icon-precomposed" href="/vrtx/decorating/resources/dist/images/apple-touch-icon.png" >
    
   


    
  
  
  

  <script><!--
    var uioPageInfo = {};

    uioPageInfo.readRestricted = false;

    
      
      uioPageInfo.cloudAllowed = true;
    

    
      uioPageInfo.authenticated = "anonymous";
    
  // -->
  </script>

  
    <script src="https://www.uio.no/vrtx/__vrtx/app-services/marketing-consent-uio.js"></script>
  


    
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  <script><!--
    if (/iPad|Android 3/i.test(navigator.userAgent)) {
      var tabletVp = document.getElementById('viewport');
      tabletVp.setAttribute("content", "width=1020, user-scalable=yes");
    }
    if (/googlebot/i.test(navigator.userAgent)) {
      document.addEventListener("DOMContentLoaded", function(event) {
        var css = '@media only screen and (max-width: 16cm) and (orientation : portrait),' +
                  '       only screen and (max-width: 19cm) and (orientation : landscape) { * { max-width: 420px; } }';
        var head = document.getElementsByTagName('head')[0];
        var s = document.createElement('style');
        s.setAttribute('type', 'text/css');
        if (s.styleSheet) {
          s.styleSheet.cssText = css;
        } else {
          s.appendChild(document.createTextNode(css));
        }
        head.appendChild(s);
      });
    }
  // -->
  </script>

  <link rel="stylesheet" media="all" href="/vrtx/decorating/resources/dist/src/css/style.css" >
  
    <link rel="stylesheet" media="only screen and (max-width: 16cm) and (orientation : portrait), only screen and (max-width: 19cm) and (orientation : landscape)" href="/vrtx/decorating/resources/dist/src/css/responsive.css" >
  

  <link rel="stylesheet" media="print" href="/vrtx/decorating/resources/dist/src/css/print.css" >

  
  

  <script type='text/javascript' src='/vrtx/decorating/resources/dist/src/lib/jquery.min.js'></script>

   
     
       <script src="//vrtx.uio.no/js/analytics/v2/uioGa.js"></script>
     
     
       <script src="//vrtx.uio.no/js/analytics/v2/www.uio.no/customTracker.js"></script> 
     
   


    
        
        
      
  </head>

  
    
      <body class='www.uio.no not-for-ansatte faculty no '  id="vrtx-structured-article">
    
  
  <!--stopindex-->


     
  
  
  
  
  
  

  <!-- Hidden navigation start -->
  <div id="hidnav-wrapper" role="navigation">
    <ul id="hidnav">
     
       <li><a href="#globalnav">Hovednavigasjon (hopp)</a></li>
     
     <li><a href="#main">Hovedinnholdet (hopp)</a></li>
     
       <li><a href="#bottomnav">Temanavigasjon (hopp)</a></li>
     
     <li><a href="#footers">Kontaktinformasjon (hopp)</a></li>
    </ul>
  </div>
  <!-- Hidden navigation end -->


    <div id="head-wrapper" role="banner">
        
          
       
        <div id="head">
           

           
           <div class="uio-app-name">
                
                  <a href="https://www.uio.no/" class="uio-seal">
                    <span class="offscreen-screenreader">UiO</span>
                  </a>
                  <a href="https://www.uio.no/" class="uio-acronym georgia">UiO</a>
                  <a href="https://www.uio.no/" class="uio-host uio-host-resp">Universitetet i Oslo</a>
                

                
                  
                    <a href="https://www.uio.no/" class="uio-host">Universitetet i Oslo</a>
                  
                

                
                  
                

                
            </div>
            

            

            
            <div class="head-menu" role="navigation">
              
              
              <ul>
                
                  
                    <li class="for-ansatte"><a href="https://for-ansatte.uio.no/index.html?lang=no">For ansatte</a></li>
                    
                    
                      
                        <li class="language"><a href='https://www.uio.no/english/'>English website</a></li>
                      
                    
                  
                
                </ul>
                


            </div>

            <div class="header-search">
              <form method="get" action='/'>
                <fieldset>
                  <label for="search-string" class="search-string-label">Søk i nettsidene til UiO</label>
                  <input type="hidden" name="vrtx" value="searchuio">
                  <input id="search-string" type="text" name="query" placeholder="Søk i nettsidene til UiO">
                  <button type="submit">Søk</button>
                </fieldset>
              </form>
            </div>
            

            
        </div>

        

    

<div id="menu-wrapper" role="navigation">
           <ul class="menu">
            <li><a href="#" class="toggle-navigation">
                    <span class="icon"></span>
                    <span class="text">Meny</span>
                </a>
            </li>
            <li>
                <a href="#" class="toggle-search">
                    <span class="icon"></span>
                    <span class="text">Søk</span>
                </a>
            </li>
        </ul>
       </div>

        <!-- Global navigation start -->
	<div id="globalnav" aria-labelledby="globalnav-title">
          <span id="globalnav-title" style="display: none">Hovednavigasjon</span>
          
          
            
                <ul class="vrtx-tab-menu">
    <li class="root-folder parent-folder">
  <a href="https://www.uio.no/">Forsiden</a>
    </li>
    <li class="forskning">
  <a href="https://www.uio.no/forskning/">Forskning</a>
    </li>
    <li class="vrtx-active-item studier vrtx-current-item" aria-current="page">
  <a href="https://www.uio.no/studier/">Studier</a>
    </li>
    <li class="livet-rundt-studiene">
  <a href="https://www.uio.no/livet-rundt-studiene/">Livet rundt studiene</a>
    </li>
    <li class="tjenester">
  <a href="https://www.uio.no/tjenester/">Tjenester og verktøy</a>
    </li>
    <li class="om">
  <a href="https://www.uio.no/om/">Om UiO</a>
    </li>
    <li class="personer">
  <a href="https://www.uio.no/personer/">Personer</a>
    </li>
  </ul>


            
          
          
        </div>
	<!-- Global navigation end -->
    </div>

       <div class="menu-search">
          <form method="get" action="/">
            <input type="hidden" name="vrtx" value="searchuio">
            <label for="search-string-responsive" class="search-string-label">Søk i nettsidene til UiO</label>
            <input id="search-string-responsive" type="text" name="query" placeholder="Søk i nettsidene til UiO">
            <button type="submit">Søk</button>
          </form>
        </div>

    
    

  <div class="grid-container uio-info-message alert &nbsp;">
  <div class="row">
  <div class="col-1-1">

  

  
  
    
       &nbsp;
    
  
  
  

  </div>
  </div>
  </div>

   <div id="main" role="main">
     <div id="left-main" role="navigation" aria-labelledby="left-main-title">
       <span id="left-main-title" style="display: none">Undernavigasjon</span>
       
         
             <ul class="vrtx-breadcrumb-menu">
            <li class="vrtx-ancestor"> <a href="https://www.uio.no/studier/"><span>Studier</span></a></li>
            <li class="vrtx-ancestor"> <a href="https://www.uio.no/studier/emner/"><span>Emner</span></a></li>
            <li class="vrtx-ancestor"> <a href="https://www.uio.no/studier/emner/matnat/"><span>Matematikk og naturvitenskap</span></a></li>
            <li class="vrtx-ancestor"> <a href="https://www.uio.no/studier/emner/matnat/ifi/"><span>Informatikk</span></a></li>
            <li class="vrtx-ancestor"> <a href="https://www.uio.no/studier/emner/matnat/ifi/IN3230/"><span>in3230</span></a></li>
            <li class="vrtx-parent" ><a href="https://www.uio.no/studier/emner/matnat/ifi/IN3230/h20/"><span>Høst 2020</span></a>

      <ul>
          <li class="vrtx-child"><a  href="https://www.uio.no/studier/emner/matnat/ifi/IN3230/h20/abbreviations/"><span>Abbreviations</span></a></li>
          <li class="vrtx-child"><a  href="https://www.uio.no/studier/emner/matnat/ifi/IN3230/h20/generell-informasjon/"><span>Generell informasjon</span></a></li>
          <li class="vrtx-child"><a  href="https://www.uio.no/studier/emner/matnat/ifi/IN3230/h20/kursmateriell/"><span>kursmateriell</span></a></li>
          <li class="vrtx-child"><a class="vrtx-marked" aria-current="page" href="https://www.uio.no/studier/emner/matnat/ifi/IN3230/h20/oblig/"><span>Obligatorisk oppgave</span></a></li>
      </ul>

    </li>

  </ul>

         
       
     </div>
     <div id="right-main" class="uio-main">
       

           
            
              <div class="vrtx-context-box vrtx-context-box-linked">
                <a href="/studier/emner/matnat/ifi/IN3230/h20/">
                  
                    IN3230 - Høst 2020
                  
                </a>
              </div>
            

       <!--startindex-->
       
        <div id="vrtx-content">
        
        
        
          <div id="vrtx-main-content" class="vrtx-hide-additional-content-false">
        
            
      

            <div id="vrtx-main-user">
              <h1>
      
        Running your VM on NREC
      </h1>
              
      
              
              
                
      
      
      
      
      
      
      
      
      
      
      
     
      
              
              




              <p>In order for you to be able to solve the mandatory assignment and home exams, we have reserved resources for all students taking the course on <a href="https://www.nrec.no">NREC</a>. This is a cloud infrastructure platform delivered in collaboration between the universities of Oslo and Bergen.</p>

<p>There is a quite comprehensive guide to using the service available <a href="https://docs.nrec.no/">here</a>, but in the interest of brevity here is a short step-by-step guide:</p>

<h2>Access to NREC</h2>

<p>All students who registered in NREC and submitted our signup form have been granted access to the IN3230/4230 project. If you did not do this, or for whatever reason do not have access do the following:</p>

<ol>
	<li>Make sure you've completed the <a href="https://access.nrec.no/">NREC first-time sign in.</a></li>
	<li>Send an email to <a href="mailto:in3230@ifi.uio.no?subject=NREC%20access">in3230@ifi.uio.no</a> and request access.</li>
</ol>

<h2>Provisioning a VM instance running the IN3230/4230 image</h2>

<p>This is mostly the same as the official guide to <a href="https://docs.nrec.no/create-virtual-machine.html">creating a Linux virtual machine</a>, except that we will select a custom disk image.</p>

<ol>
	<li>Log into the <a href="https://dashboard.nrec.no">NREC dashboard</a></li>
	<li>(Optional, but recommended for better performance) Select the "osl" region by clicking on "uio-ifi-in3230-4230-h20 bgo" in the upper left corner of the page. Otherwise your VM will be physically located in Bergen.</li>
	<li>In the menu on the left, navigate to Project &gt; Compute &gt; Key Pairs.</li>
	<li>If you already use an SSH key pair to log into e.g. the Ifi login server, pick "Import key pair" and paste in your <strong>public</strong> key. Usually you will find this at ~/.ssh/id_rsa.pub on a *NIX machine.</li>
	<li>If you have never set up SSH key pairs, you can instead choose the "Create Key Pair" button. Follow the wizard and make sure to select "SSH key" in the&nbsp; "Key type" dropdown. You will download the key pair and point your SSH client at it.</li>
	<li>In the left-hand menu, navigate to Project &gt; Compute &gt; Instances.</li>
	<li>Hit "Launch instance".</li>
	<li>On the "Details" tab, name your VM instance something descriptive (<strong>include your username</strong>) and leave the rest as default.</li>
	<li>On the "Source" tab, select "in3230-h20-master-v01 " from the list at the bottom (click the arrow icon to select).</li>
	<li>On the "Flavor" tab, select "m1.small".</li>
	<li>On the "Networks" tab, select "dualStack".</li>
	<li>On the "Security groups" tab, you need to add at least the "Allow SSH" policy. Optionally you can add the "Allow ICMP" policy as well, this will let you ping your VM from the outside.</li>
	<li>On the "Key Pair" tab, make sure your key pair is selected (it might be by default).</li>
	<li>The rest of the options can be left in their default state. Click "Launch Instance" to provision the VM.</li>
	<li>This can take a couple of minutes, wait until the instance state changes to "Running".</li>
	<li>Your VM is now booting.</li>
	<li>When the VM has finished booting, you should be able to access it via SSH: "ssh debian@&lt;VM IP&gt;". You will find the IP in the instance list.</li>
	<li>When you've verified you can log in, you can access a remote desktop on the VM via VNC over SSH. See below.</li>
	<li>Remember to keep backups of your work OFF the VM instance, and to shut it down if you are not using it for a while.</li>
</ol>

<h3>Important information</h3>

<p>The is no automatic backup service included as part of the NREC platform, so make sure to keep copies/backups stored <strong>away from the VM instance</strong>. You could for example version your code in Git and make sure to push it to some remote repository whenever you make changes. This is a good idea anyway.</p>

<h3>Remote desktop access</h3>

<p>When your VM is up and running, you can access the graphical desktop remotely using VNC tunneled over an SSH connection. The VNC server is already set up for you on the VM.</p>

<p>On your own machine, you will need some VNC client. There is usually one installed on most Linux distributions, check your application menu. A common client that is launched from the command line is xfreerdp, this is installed on Ifi machines. On Mac OS X, the installed-by-default Screen Sharing application is actually a VNC client. On Windows you can for example use <a href="https://www.tightvnc.com/download.php">TightVNC</a>. <a href="https://www.realvnc.com/en/connect/download/viewer/windows/">RealVNC Viewer</a> can be run as a standalone EXE (without going through an installer), which should work fine on Ifi Windows lab machines.</p>

<p>Because VNC is a very insecure protocol by itself (no encryption of either authentication or screen data), we will protect the session using an SSH tunnel. The VNC server will only accept connections from the local machine, so even if you create bad firewall rules nobody will be able to access it from the outside.</p>

<p>On Linux or OS X, first set up the tunnel using this command:</p>

<p>ssh -L 127.0.0.1:9999:127.0.0.1:5901 -NT debian@&lt;VM IP&gt;</p>

<p>This sets up a TCP listener on your local machine, port 9999 (you can pick any unused port here), which will connect to TCP port 5901 (don't change this port number!) on the VM's loopback interface, which is where the VNC server is listening. The -NT options will cause the tunnel to persist until you kill SSH e.g. with CTRL+C.</p>

<p>When the tunnel is set up (your terminal will appear to "hang"), you can connect to localhost:9999 using your VNC client. The password is <em>mininet</em>. Your desktop session will normally persist between VNC sessions as long as you don't reboot the VM.</p>

<p>On Windows you will need to set up the tunnel using the PuTTY configuration interface. See <a href="https://www.skyverge.com/blog/how-to-set-up-an-ssh-tunnel-with-putty/">this guide</a> for an example of doing that.</p>

            </div>

            
      
      
      
            

            
      
            
      
        <div class="vrtx-date-info">
          <span class="published-date-label">Publisert</span> <span class="published-date">25. aug. 2020 09:45 </span>
          
           - <span class="last-modified-date">Sist endret</span> <span class="last-modified-date">25. aug. 2020 11:04</span>
          
        </div>
      
            
              <div class="vrtx-social-components">
                
                  
<a class="vrtx-email-friend" title='Del på e-post' href="mailto:?subject=Running%20your%20VM%20on%20NREC&amp;body=https%3A%2F%2Fwww.uio.no%2Fstudier%2Femner%2Fmatnat%2Fifi%2FIN3230%2Fh20%2Foblig%2Frunning-your-vm-on-nrec.html">
Del på e-post</a>

                
                
                  
<div class="vrtx-share-at-component">
  <ul>

       <li class="vrtx-share-at-Facebook">
         <a href="http://www.facebook.com/sharer.php?u=https%3A%2F%2Fwww.uio.no%2Fstudier%2Femner%2Fmatnat%2Fifi%2FIN3230%2Fh20%2Foblig%2Frunning-your-vm-on-nrec.html" target="_blank" class="facebook">
           Del på Facebook</a>
       </li>

       <li class="vrtx-share-at-Twitter">
         <a href="http://twitter.com/intent/tweet?text=Running+your+VM+on+NREC&amp;url=https%3A%2F%2Fwww.uio.no%2Fstudier%2Femner%2Fmatnat%2Fifi%2FIN3230%2Fh20%2Foblig%2Frunning-your-vm-on-nrec.html" target="_blank" class="twitter">
           Del på Twitter</a>
       </li>
  </ul>
</div>

                
              </div>
            
            



          </div>
          
      
      
      
        
      
        </div>
      
       <!--stopindex-->
     </div>
   </div>

   <div id="bottomnav" role="navigation">
     

     <div id="breadcrumb-container">
       
         <div id="vrtx-breadcrumb-start" class="breadcrumb">
           
             <span class="vrtx-uio"><a href="https://www.uio.no/">UiO</a> <span class="vrtx-breadcrumb-delimiter">&gt;</span></span>
           
           
             <span class="vrtx-faculty"><a href="https://www.uio.no/">Universitetet i Oslo</a> <span class="vrtx-breadcrumb-delimiter">&gt;</span></span>
           
         </div>
         
           






  <div id="vrtx-breadcrumb-wrapper">
    <div id="vrtx-breadcrumb" class="breadcrumb">
            <span class="vrtx-breadcrumb-level vrtx-breadcrumb-level-2">
            <a href="https://www.uio.no/studier/">Studier</a>
      	  <span class="vrtx-breadcrumb-delimiter">&gt;</span>
        </span>
    </div>
  </div>

         

       
       </div>

       <div id="bottom-menu">
         
           

         
       </div>
     
     
       
         <div id="bottom-subfolder-menu">
           

         </div>
       
     
   </div>




    <!-- Page footer start -->
    <div id="footer-wrapper" class="grid-container " role="contentinfo">
       <div id="footers" class="row">
            <div class="col-3-5 vcard">
            
              
                
                  <div class="col-1-3 adr">
  <div class="content">
    <h2 class="menu-label">Kontakt oss</h2>
        <p><a href="/om/kontaktinformasjon/">Kontaktpunkter UiO</a></p>
  </div>
</div>
<div class="col-1-3 adr">
  <div class="content">
    <h2 class="menu-label">Adresse</h2>
    <p><span class="post-office-box">Universitetet i Oslo</span><br/>
    <span class="post-office-box">Boks 1072 Blindern</span><br/>
    <span class="postal-code">0316 Oslo</span></p>
  </div>
</div>
<div class="col-1-3">
  <div class="content">
    <h2 class="menu-label">Nødnummer</h2>
    <p>Ved brann, ulykker og alvorlige hendelser ring <br/><span class="tel">22 85 66 66</span></p>
  </div>
</div>
                
              
            
            </div>
            <div class="col-2-5 responsible-login">
             <div class="content">
                <span class="menu-label">Ansvarlig for denne siden</span>
                <p>
                  
                    <a href="mailto:studieredaktor@admin.uio.no">studieredaktor@admin.uio.no</a>
                  
                </p>
                
  
  
  
    <!-- begin view dropdown js -->
    <script type="text/javascript" src="/vrtx/__vrtx/static-resources/js/view-dropdown.js"></script>
    <!-- end view dropdown js -->
  
  <div class="vrtx-login-manage-component vrtx-dropdown-component vrtx-dropdown-component-toggled">
      <a href="https://www.uio.no/studier/emner/matnat/ifi/IN3230/h20/oblig/running-your-vm-on-nrec.html?authTarget" class="vrtx-login-manage-title-link vrtx-dropdown-title-link" rel="nofollow">Logg inn</a>
      <a href="javascript:void(0)" class="vrtx-login-manage-link vrtx-dropdown-link" rel="nofollow"><span class="offscreen-screenreader">Logg ut meny</span></a>
    <div class="vrtx-login-manage-wrapper vrtx-dropdown-wrapper">
      <div class="vrtx-login-manage-wrapper-inner vrtx-dropdown-wrapper-inner">
      <ul>
          
          <li class="vrtx-dropdown-first vrtx-dropdown-last">
            
              <a href="https://www-adm.uio.no/studier/emner/matnat/ifi/IN3230/h20/oblig/running-your-vm-on-nrec.html?vrtx=admin" class="vrtx-login-manage-admin" rel="nofollow">
Administrer dette dokumentet              </a>
          </li>
      </ul>
      </div>
    </div>
  </div>
    


              </div>
            </div>
        </div>
    </div>

    
  
  
  
  
  
  
  

  <script src='/vrtx/decorating/resources/dist/src/js/uio2.js'></script>

  
  

</body>
</html>
